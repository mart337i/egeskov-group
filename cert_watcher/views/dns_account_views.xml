<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- DNS Account list View -->
        <record id="view_dns_account_list" model="ir.ui.view">
            <field name="name">dns.account.list</field>
            <field name="model">dns.account</field>
            <field name="arch" type="xml">
                <list decoration-muted="active == False">
                    <field name="name"/>
                    <field name="provider_id"/>
                    <field name="is_default" widget="boolean"/>
                    <field name="certificate_count"/>
                    <field name="active" widget="boolean"/>
                </list>
            </field>
        </record>
        
        <!-- DNS Account Form View -->
        <record id="view_dns_account_form" model="ir.ui.view">
            <field name="name">dns.account.form</field>
            <field name="model">dns.account</field>
            <field name="arch" type="xml">
                <form>
                    <header>
                        <button name="action_test_connection" 
                                string="Test Connection" 
                                type="object" 
                                class="oe_highlight"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" name="action_view_certificates" icon="fa-certificate">
                                <field string="Certificates" name="certificate_count" widget="statinfo"/>
                            </button>
                        </div>
                        
                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" invisible="active"/>
                        
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="provider_id"/>
                                <field name="is_default"/>
                                <field name="active"/>
                            </group>
                            <group>
                                <field name="certificate_count"/>
                            </group>
                        </group>
                        
                        <group string="Description">
                            <field name="description" nolabel="1"/>
                        </group>
                        
                        <notebook>
                            <page string="Cloudflare" invisible="provider_id.code != 'cloudflare'">
                                <group>
                                    <field name="api_token" password="True"/>
                                </group>
                            </page>
                            
                            <page string="AWS Route53" invisible="provider_id.code != 'route53'">
                                <group>
                                    <field name="access_key_id"/>
                                    <field name="secret_access_key" password="True"/>
                                    <field name="region"/>
                                </group>
                            </page>
                            
                            <page string="Azure" invisible="provider_id.code != 'azure'">
                                <group>
                                    <field name="subscription_id"/>
                                    <field name="resource_group"/>
                                    <field name="tenant_id"/>
                                    <field name="client_id"/>
                                    <field name="client_secret" password="True"/>
                                </group>
                            </page>
                            
                            <page string="Google Cloud" invisible="provider_id.code != 'google'">
                                <group>
                                    <field name="project_id"/>
                                    <field name="service_account_key" widget="text"/>
                                </group>
                            </page>
                            
                            <page string="PowerDNS" invisible="provider_id.code != 'powerdns'">
                                <group>
                                    <field name="api_url"/>
                                    <field name="api_key" password="True"/>
                                </group>
                            </page>
                            
                            <page string="Generic" invisible="provider_id.code in ['cloudflare', 'route53', 'azure', 'google', 'powerdns'])]">
                                <group>
                                    <field name="username"/>
                                    <field name="password" password="True"/>
                                    <field name="api_token" password="True"/>
                                    <field name="api_key" password="True"/>
                                    <field name="endpoint"/>
                                </group>
                            </page>
                            
                            <page string="Advanced Configuration">
                                <field name="config_data" widget="text" placeholder="Additional configuration as JSON"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- DNS Account Search View -->
        <record id="view_dns_account_search" model="ir.ui.view">
            <field name="name">dns.account.search</field>
            <field name="model">dns.account</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="provider_id"/>
                    <filter string="Default" name="default" domain="[('is_default', '=', True)]"/>
                    <filter string="Active" name="active" domain="[('active', '=', True)]"/>
                    <separator/>
                    <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
                    <group expand="0" string="Group By">
                        <filter string="Provider" name="group_provider" context="{'group_by': 'provider_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        
        <!-- DNS Account Action -->
        <record id="action_dns_account" model="ir.actions.act_window">
            <field name="name">DNS Accounts</field>
            <field name="res_model">dns.account</field>
            <field name="view_mode">list,form</field>
        </record>
        
    </data>
</odoo>
